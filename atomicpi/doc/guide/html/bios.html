<!-- HTML header for doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen"/>
<title>DLI Atomic Pi user guide: UEFI BIOS description</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<script type="text/javascript" src="dli_context.js"></script>
<link href="style.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DLI Atomic Pi user guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
<div id="doxygendocversion">20190502T140852Z</div>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('bios.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">UEFI BIOS description </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The Atomic Pi ships with AMI UEFI BIOS firmware.</p>
<p>The UEFI provides interactive user services, allows to perform low-level configuration, scans for boot targets and initiates further boot.</p>
<p>Note that the UEFI doesn't support legacy BIOS (MBR) booting, so your boot media must have a proper bootable EFI partition. No further constraints are placed on the EFI partition, in particular, no signature checking is configured.</p>
<h1><a class="anchor" id="bios_issues"></a>
Known UEFI BIOS issues</h1>
<h2><a class="anchor" id="bios_rtc"></a>
RTC date/time cannot be set via UEFI</h2>
<p>When a date/time component is changed, the UEFI displays an error message and hangs. The component change is applied before the hang.</p>
<p>The error message says: </p><pre class="fragment">ERROR: Class:3000000; Subclass:50000; Operation: E
</pre><p>(this corresponds to software error in DXE driver).</p>
<p>The system then hangs, requiring a power cycle.</p>
<p>No workaround is available; however, the RTC time can be changed on a running system, e.g. via the <code>hwclock</code> utility on Linux systems. No solution is available at the moment.</p>
<h2><a class="anchor" id="bios_pxe"></a>
UEFI defaults to PXE boot</h2>
<p>PXE is an option for booting devices from a central server over network.</p>
<p>The default boot target list gives network PXE boot targets priority over other boot targets, including the eMMC. If the wired interface is active but has no PXE server, it takes some time for the UEFI to realize it needs to try other boot options.</p>
<p>After a settings reset, the system is configured so that it may boot unacceptably slow (apparently not doing anything) if connected to a network. If the network has a PXE server but it's not intended to boot from it, unexpected operation can occur.</p>
<p>No solution or workaround is available at the moment but systems not connected to wired networks are not affected.</p>
<h2><a class="anchor" id="bios_targets"></a>
UEFI boot target anomalies</h2>
<p>The UEFI keeps a priority list of targets to boot. It rescans available devices and interfaces (eMMC, SD, USB) on boot and adds bootable devices to its list.</p>
<p>The UEFI seems to attempt to boot the previously successful boot target before rescanning the list, possibly failing boot if it doesn't find it.</p>
<p>If you e.g. install a bootable image from USB to eMMC, and expect that the next boot will be performed from eMMC, the USB device may be booted instead, or the boot may fail if the device is detached. Subsequent boots are not affected.</p>
<p>A possible workaround is to perform an additional power cycle several seconds after attempting to boot from a new installation. No solution is available at the moment.</p>
<p>Additionally, the boot target counter doesn't seem to reset by itself; the possible targets seem to accumulate as well.</p>
<p>No impact observed so far but it's conjectured that some internal counter may overflow if booting from extremely (e.g. 64k) many different bootable media (at least without performing a full settings reset).</p>
<p>A possible workaround is to perform a full settings reset from time to time if you need to boot that many media. No solution is available at the moment, but no actual overflow has been demonstrated so far. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a></li>
  </ul>
</div>
</body>
</html>
